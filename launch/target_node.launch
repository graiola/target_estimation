<?xml version="1.0" ?>
<launch>
   <arg name="gui" default="false"/>
   <arg name="kf_model" default="kf_rpy_ext_params_50hz"/>
   <arg name="token" default="target"/>
   <arg name="timeout" default="5.0"/>

   <!-- Load the kalman filter model -->
   <rosparam command="load" file="$(find target_estimation)/models/$(arg kf_model).yaml" ns="target_estimation"/>

   <!-- Start the node -->
   <node name="target_node" pkg="target_estimation" type="target_node" respawn="false" output="screen">
        <param name="token" value="$(arg token)"/>
        <param name="timeout" value="$(arg timeout)"/>
   </node>

   <!-- start plotJuggler and Rviz -->
   <group if="$(arg gui)">
        <node type="rviz" name="rviz" pkg="rviz" args="-d $(find target_estimation)/rviz/target_node.rviz"/>
        <node pkg="plotjuggler" type="plotjuggler" name="plotjuggler"
              args="--layout $(find target_estimation)/plot_juggler_files/kalman.xml --nosplash">
        </node>
   </group>
</launch>
